<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Alyssa</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    *{box-sizing:border-box}
    html, body { margin:0; padding:0; height:100%; background:#000; font-family:'Montserrat',sans-serif; overflow:hidden; }

    /* ===== Gift Policy Overlay ===== */
    .overlay { position:fixed; inset:0; z-index:999; background:rgba(0,0,0,.85); display:flex; align-items:center; justify-content:center; }
    .overlay.hidden { display:none; }
    .overlay-content{ background:#f0f0f0; color:#111; border-radius:10px; padding:18px; width:85%; max-width:360px; font-size:.85em; line-height:1.4em; box-shadow:0 0 12px rgba(0,0,0,.25); }
    .overlay-content h2{ text-align:center; margin:0 0 6px; font-size:1.1em; }
    .checkbox-container{ display:flex; align-items:center; gap:8px; margin-top:12px; font-size:.85em; }
    .accept-btn{ display:block; margin:15px auto 0; padding:10px 24px; font-size:.95em; font-weight:600; color:#fff; background:#2e7d32; border:none; border-radius:6px; cursor:not-allowed; opacity:.6; transition:.2s; }
    .accept-btn.enabled{ cursor:pointer; opacity:1; }
    .accept-btn.enabled:hover{ background:#256628; }

    /* ===== Main content ===== */
    .content{ position:relative; width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; color:#fff; text-align:center; }
    h1{ font-weight:700; font-size:2.2em; margin-bottom:10px; }
    .button{
      margin-top:8px; padding:16px 32px; font-size:1.2em; font-weight:700; color:#fff;
      background:linear-gradient(135deg,#ff66cc,#ff1493);
      border:none; border-radius:25px; cursor:pointer;
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;
      animation:pulseGlow 2s ease-in-out infinite;
    }
    @keyframes pulseGlow{
      0%{box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;}
      50%{box-shadow:0 0 16px #ff8fd2, 0 0 34px #ff6ec4, 0 0 60px #ff1493;}
      100%{box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;}
    }
    @media (prefers-reduced-motion:reduce){ .button{ animation:none; } }

    /* ===== Gift modal ===== */
    .gift-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:900;backdrop-filter:blur(2px)}
    .gift-backdrop.open{display:flex}
    .gift-card{
      width:min(92vw,460px);
      background:#111;color:#f7f7f7;border-radius:16px;
      box-shadow:0 12px 48px rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.08);
      transform:scale(.96);opacity:0;animation:giftPop .18s ease-out forwards
    }
    @keyframes giftPop{to{transform:scale(1);opacity:1}}
    .gift-topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);border-top-left-radius:16px;border-top-right-radius:16px}
    .gift-title{margin:0;font-weight:800;font-size:1.05em}
    .gift-sub{margin:2px 0 0;opacity:.9;font-size:.9em}
    .close-x{background:none;border:none;color:#bbb;font-size:20px;cursor:pointer}
    .gift-body{padding:14px 16px 16px;display:flex;flex-direction:column;gap:12px}

    .selector{display:flex;align-items:center;justify-content:center;gap:10px}
    .nav-btn{width:36px;height:36px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:#202020;color:#fff;font-weight:800;cursor:pointer}
    .ticker-badge{background:#2a2a2a;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:6px 10px;font-weight:800;letter-spacing:.03em}

    .addr-wrap{background:#1a1a1a;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px}
    .addr-lines{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:.95em;word-break:break-all;white-space:normal;line-height:1.35}
    .copy-row{display:flex;justify-content:flex-end;margin-top:8px}
    .copy-btn{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:#262626;color:#fff;font-weight:600;font-size:.85em;cursor:pointer}
    .copy-btn.ok{background:#1e7f3e;border-color:#1e7f3e}

    /* QR box pointillÃ© fin + compact + alignÃ© + fondu */
    .qr-box{
      background:#121212;
      border:1px dashed rgba(255,255,255,.28);
      border-radius:12px;
      width:100%;
      padding:10px;
      display:grid; place-items:center;
      min-height:200px;
      margin-top:2px;
    }
    .qr-box img{
      display:block;
      width:100%;
      max-width:260px;
      height:auto;
      border-radius:10px;
      opacity:0;
      transition:opacity .3s ease;
    }
    .qr-box img.loaded{ opacity:1; }
    .qr-fallback{color:#aaa;font-size:.9em;text-align:center}

    .hint{margin:4px 2px 0;color:#aaa;font-size:.8em;text-align:center;}

    .btn-row{display:flex;gap:8px}
    .btn{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:#202020;color:#fff;font-weight:700;font-size:.95em;cursor:pointer;text-align:center}
    .btn.primary{background:#2e7d32;border-color:#2e7d32}
    .btn.primary:hover{background:#256628}
  </style>
</head>
<body>
  <!-- ===== Gift Policy overlay ===== -->
  <div class="overlay" id="overlay">
    <div class="overlay-content">
      <h2>Gift Policy</h2>
      <p><b>Voluntary Support</b> - All payments are voluntary gifts to support Alyssa. They are not purchases of goods or services.</p>
      <p><b>No Refunds</b> - All gifts are final and non-refundable.</p>
      <p><b>No Counterpart</b> - Sending a gift does not create any obligation or counterpart.</p>
      <p><b>Legal Age</b> - By sending a gift, you confirm you are of legal age (18+ or the minimum required in your country).</p>
      <p><b>Taxes</b> - Each party is responsible for their own taxes in accordance with applicable laws.</p>
      <div class="checkbox-container">
        <input type="checkbox" id="agree" />
        <label for="agree">I agree to the Gift Policy</label>
      </div>
      <button id="accept-btn" class="accept-btn">Accept</button>
    </div>
  </div>

  <!-- ===== Main content ===== -->
  <div class="content">
    <img src="Pic.JPG" alt="profile" style="width:200px;height:200px;border-radius:50%;object-fit:cover;margin-bottom:-10px;" />
    <h1>Alyssa</h1>
    <button id="open-gift" class="button">
      <img src="lemonade.png" alt="lemonade" style="height:1.2em;vertical-align:middle;" />
      Send a Gift
    </button>
  </div>

  <!-- ===== Gift modal ===== -->
  <div id="gift-backdrop" class="gift-backdrop" aria-hidden="true">
    <div class="gift-card" role="dialog" aria-modal="true" aria-labelledby="gtitle">
      <div class="gift-topbar">
        <div>
          <p id="gtitle" class="gift-title">Send me a crypto gift</p>
          <p class="gift-sub">Your baby Shailo ðŸ’•ðŸ’¸</p>
        </div>
        <button class="close-x" id="gift-close" aria-label="Close">âœ•</button>
      </div>

      <div class="gift-body">
        <!-- Selector -->
        <div class="selector">
          <button class="nav-btn" id="prev-coin">â—€</button>
          <span class="ticker-badge" id="coin-name">BTC</span>
          <button class="nav-btn" id="next-coin">â–¶</button>
        </div>

        <!-- Address -->
        <div class="addr-wrap">
          <div class="addr-lines" id="addr-text"></div>
          <div class="copy-row"><button id="copy-btn" class="copy-btn">Copy</button></div>
        </div>
        <div id="network-hint" class="hint"></div>

        <!-- QR -->
        <div class="qr-box">
          <img id="qr-img" src="BTC.jpg" alt="QR / Logo"
               onerror="this.style.display='none';document.getElementById('qr-fallback').style.display='block';" />
          <div id="qr-fallback" class="qr-fallback" style="display:none;">QR not found</div>
        </div>

        <!-- Actions -->
        <div class="btn-row">
          <a id="save-link" class="btn" href="BTC.jpg" download="BTC.jpg">Save image</a>
          <a id="wallet-link" class="btn primary" href="#">Open Trust</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===== Policy ===== */
    const overlay = document.getElementById('overlay');
    const acceptBtn = document.getElementById('accept-btn');
    const agree = document.getElementById('agree');
    acceptBtn.disabled = true;
    agree.addEventListener('change', () => {
      const on = agree.checked;
      acceptBtn.classList.toggle('enabled', on);
      acceptBtn.disabled = !on;
    });
    acceptBtn.addEventListener('click', () => { if (agree.checked) overlay.classList.add('hidden'); });

    /* ===== Modal open/close ===== */
    const openGift = document.getElementById('open-gift');
    const giftBackdrop = document.getElementById('gift-backdrop');
    const giftClose = document.getElementById('gift-close');
    function openModal(){ giftBackdrop.classList.add('open'); giftBackdrop.setAttribute('aria-hidden','false'); }
    function closeModal(){ giftBackdrop.classList.remove('open'); giftBackdrop.setAttribute('aria-hidden','true'); }
    openGift.addEventListener('click', openModal);
    giftClose.addEventListener('click', closeModal);
    giftBackdrop.addEventListener('click', (e)=>{ if(e.target===giftBackdrop) closeModal(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    /* ===== Coins config ===== */
    const COINS = [
      {
        name: 'BTC',
        address: 'bc1qj5d9cyfumcxzu2d6z0axrlnz6llxuhfyxzu6uj', // <-- ton adresse BTC
        qr: 'BTC.jpg',
        // Trust "send": asset UAI pour Bitcoin
        trustAsset: 'c0',        // BTC
        btcAmount: null          // ex "0.0002" si tu veux un montant
      },
      {
        name: 'USDT-TRC20',
        address: 'TZGnjowAoHm5aNvi5cPATcv4GBwUTJLEus',         // <-- ton adresse TRON
        qr: 'USDTTRC20.jpg',
        // Trust "send": asset UAI pour USDT sur TRON (TRC20)
        trustAsset: 'c195_tTR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',
        usdtAmount: null         // ex "5" si tu veux un montant
      }
    ];

    /* ===== PrÃ©chargement des QR (fluiditÃ©) ===== */
    COINS.forEach(c => { const img = new Image(); img.src = c.qr; });

    /* ===== Elements ===== */
    const nameEl = document.getElementById('coin-name');
    const addrEl  = document.getElementById('addr-text');
    const copyBtn = document.getElementById('copy-btn');
    const qrImg   = document.getElementById('qr-img');
    const qrFallback = document.getElementById('qr-fallback');
    const saveLink = document.getElementById('save-link');
    const walletLink = document.getElementById('wallet-link');
    const prevBtn = document.getElementById('prev-coin');
    const nextBtn = document.getElementById('next-coin');
    const hintEl  = document.getElementById('network-hint');

    // Deep link Trust "send"
    function trustSendLink(assetUai, address, amount){ // amount facultatif
      const base = 'https://link.trustwallet.com/send';
      const params = new URLSearchParams({ asset: assetUai, address });
      if (amount) params.set('amount', amount);
      return `${base}?${params.toString()}`;
    }

    // fade-in du QR quand l'image est chargÃ©e
    function setQr(src, alt){
      qrImg.classList.remove('loaded');
      qrImg.onload = () => qrImg.classList.add('loaded');
      qrImg.src = src;
      qrImg.alt = alt;
    }

    let idx = 0;

    function render(){
      const c = COINS[idx];
      nameEl.textContent = c.name;
      addrEl.textContent = c.address;

      // QR (avec fondu)
      qrImg.style.display = ''; qrFallback.style.display = 'none';
      setQr(c.qr, `${c.name} QR`);

      // Save
      saveLink.href = c.qr; saveLink.download = c.qr;

      // Bouton vert "Open Trust"
      walletLink.classList.add('primary');
      walletLink.onclick = null;

      if (c.name === 'BTC') {
        hintEl.textContent = '';
        const url = trustSendLink(c.trustAsset, c.address, c.btcAmount);
        walletLink.textContent = 'Open Trust';
        walletLink.href = url;

        // Copy simple
        copyBtn.textContent = 'Copy';
        copyBtn.onclick = async () => {
          try {
            await navigator.clipboard.writeText(c.address);
            copyBtn.textContent = 'Copied!'; copyBtn.classList.add('ok');
            setTimeout(()=>{ copyBtn.textContent='Copy'; copyBtn.classList.remove('ok'); }, 1400);
          } catch {
            const r=document.createRange(); r.selectNode(addrEl);
            const s=window.getSelection(); s.removeAllRanges(); s.addRange(r);
            document.execCommand('copy'); s.removeAllRanges();
            copyBtn.textContent='Copied!'; setTimeout(()=>copyBtn.textContent='Copy',1400);
          }
        };

      } else { // USDT-TRC20
        hintEl.innerHTML = 'USDT on <strong>TRON (TRC20)</strong> only. ';
        const url = trustSendLink(c.trustAsset, c.address, c.usdtAmount);
        walletLink.textContent = 'Open Trust';
        walletLink.href = url;

        copyBtn.textContent = 'Copy';
        copyBtn.onclick = async () => {
          try {
            await navigator.clipboard.writeText(c.address);
            copyBtn.textContent = 'Copied!'; copyBtn.classList.add('ok');
            setTimeout(()=>{ copyBtn.textContent='Copy'; copyBtn.classList.remove('ok'); }, 1400);
          } catch {
            const r=document.createRange(); r.selectNode(addrEl);
            const s=window.getSelection(); s.removeAllRanges(); s.addRange(r);
            document.execCommand('copy'); s.removeAllRanges();
            copyBtn.textContent='Copied!'; setTimeout(()=>copyBtn.textContent='Copy',1400);
          }
        };
      }
    }

    function next(){ idx = (idx + 1) % COINS.length; render(); }
    function prev(){ idx = (idx - 1 + COINS.length) % COINS.length; render(); }
    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);

    // initial
    render();
  </script>
</body>
</html>
