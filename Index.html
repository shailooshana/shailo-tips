<!-- ========== Gift modal (drop-in) ========== -->
<style>
  .gift-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.6);
    display:none; align-items:center; justify-content:center; z-index:900;
    backdrop-filter: blur(2px);
  }
  .gift-backdrop.open{ display:flex; }

  .gift-card{
    width:min(92vw, 440px);
    background:#111; color:#f7f7f7; border-radius:16px;
    box-shadow:0 12px 48px rgba(0,0,0,.55);
    border:1px solid rgba(255,255,255,.08);
    transform:scale(.96); opacity:0; animation:giftPop .18s ease-out forwards;
  }
  @keyframes giftPop{ to{ transform:scale(1); opacity:1; } }

  .gift-topbar{
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.08);
    border-top-left-radius:16px; border-top-right-radius:16px;
  }
  .gift-title{ margin:0; font-weight:800; font-size:1.05em; }
  .gift-sub  { margin:2px 0 0; opacity:.9; font-size:.9em; }
  .close-x{ background:none; border:none; color:#bbb; font-size:20px; cursor:pointer; }

  .gift-body{ padding:14px 16px 6px; display:flex; flex-direction:column; gap:12px; }

  /* Adresse BTC : sur une ligne avec scroll */
  .addr-wrap{
    background:#1a1a1a; border:1px solid rgba(255,255,255,.08);
    border-radius:12px; padding:10px; display:flex; align-items:center; gap:10px;
    white-space:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch;
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size:.95em;
  }
  .ticker{ background:#2a2a2a; border:1px solid rgba(255,255,255,.06);
    border-radius:8px; padding:5px 8px; font-weight:800; letter-spacing:.03em; flex:0 0 auto; }
  .addr{ user-select:all; }

  .btn-row{ display:flex; gap:8px; }
  .btn{
    flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.18);
    background:#202020; color:#fff; font-weight:700; font-size:.95em; cursor:pointer; text-align:center;
  }
  .btn.primary{ background:#2e7d32; border-color:#2e7d32; }
  .btn.primary:hover{ background:#256628; }
  .copy-btn{ flex:0 0 auto; padding:8px 12px; border-radius:8px; border:1px solid rgba(255,255,255,.18); background:#262626; }
  .copy-btn.ok{ background:#1e7f3e; border-color:#1e7f3e; }

  /* Cadre image avec fallback */
  .qr-box{
    background:#0f0f0f; border:1px dashed rgba(255,255,255,.15);
    border-radius:12px; width:100%; display:flex; align-items:center; justify-content:center;
    min-height:180px; padding:10px;
  }
  .qr-box img{ max-width:100%; max-height:240px; border-radius:10px; display:block; }
  .qr-fallback{ color:#aaa; font-size:.9em; }

  /* Neon main button (dÃ©jÃ  dans ta page) */
  .button{
    margin-top:8px; padding:16px 32px; font-size:1.2em; font-weight:700; color:#fff;
    background:linear-gradient(135deg,#ff66cc,#ff1493);
    border:none; border-radius:25px; cursor:pointer;
    display:inline-flex; align-items:center; justify-content:center; gap:8px;
    box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;
    animation:pulseGlow 2s ease-in-out infinite;
  }
  @keyframes pulseGlow{
    0%{box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;}
    50%{box-shadow:0 0 16px #ff8fd2, 0 0 34px #ff6ec4, 0 0 60px #ff1493;}
    100%{box-shadow:0 0 10px #ff7ac9, 0 0 20px #ff5fb8, 0 0 35px #ff1493;}
  }
  @media (prefers-reduced-motion:reduce){ .button{ animation:none; } }
</style>

<!-- Backdrop -->
<div id="gift-backdrop" class="gift-backdrop" aria-hidden="true">
  <div class="gift-card" role="dialog" aria-modal="true" aria-labelledby="gtitle">
    <div class="gift-topbar">
      <div>
        <p id="gtitle" class="gift-title">Send me a crypto gift</p>
        <p class="gift-sub">Your baby Shailo ðŸ’•ðŸ’¸</p>
      </div>
      <button class="close-x" id="gift-close" aria-label="Close">âœ•</button>
    </div>

    <div class="gift-body">
      <!-- BTC one-line row with Copy on same line -->
      <div class="addr-wrap">
        <span class="ticker">BTC</span>
        <span id="btc-addr" class="addr">bc1qj5d9cyfumcxzu2d6z0axrlnz6llxuhfyxzu6uj</span>
        <button id="copy-btc" class="copy-btn">Copy</button>
      </div>

      <!-- QR / image + actions -->
      <div class="qr-box">
        <!-- Si BTC.png manque, on montre un fallback texte -->
        <img id="btc-img" src="BTC.jpg" alt="BTC QR / Logo" onerror="this.style.display='none';document.getElementById('qr-fallback').style.display='block';">
        <div id="qr-fallback" class="qr-fallback" style="display:none;">QR not found (BTC.png)</div>
      </div>

      <div class="btn-row">
        <a id="save-link" class="btn" href="BTC.png" download="BTC.png">Save image</a>
        <a id="open-wallet" class="btn primary" href="bitcoin:bc1qj5d9cyfumcxzu2d6z0axrlnz6llxuhfyxzu6uj">Open in wallet</a>
      </div>
    </div>
  </div>
</div>

<script>
  // Ouvrir/fermer la modale
  const openGift = document.getElementById('open-gift');   // ton bouton nÃ©on existant
  const giftBackdrop = document.getElementById('gift-backdrop');
  const giftClose = document.getElementById('gift-close');
  function openModal(){ giftBackdrop.classList.add('open'); giftBackdrop.setAttribute('aria-hidden','false'); }
  function closeModal(){ giftBackdrop.classList.remove('open'); giftBackdrop.setAttribute('aria-hidden','true'); }
  openGift.addEventListener('click', openModal);
  giftClose.addEventListener('click', closeModal);
  giftBackdrop.addEventListener('click', (e)=>{ if(e.target===giftBackdrop) closeModal(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

  // Copy address
  const copyBtn = document.getElementById('copy-btc');
  const addrEl  = document.getElementById('btc-addr');
  copyBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(addrEl.textContent.trim());
      copyBtn.textContent = 'Copied!'; copyBtn.classList.add('ok');
      setTimeout(()=>{ copyBtn.textContent='Copy'; copyBtn.classList.remove('ok'); }, 1400);
    } catch {
      const r=document.createRange(); r.selectNode(addrEl);
      const s=window.getSelection(); s.removeAllRanges(); s.addRange(r);
      document.execCommand('copy'); s.removeAllRanges();
      copyBtn.textContent='Copied!'; setTimeout(()=>copyBtn.textContent='Copy',1400);
    }
  });
</script>
